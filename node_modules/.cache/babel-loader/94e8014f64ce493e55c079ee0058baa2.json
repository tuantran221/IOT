{"ast":null,"code":"import _asyncToGenerator from\"/home/tuantran221/Spring2022/software_design/icloud/IOT/IOT/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/tuantran221/Spring2022/software_design/icloud/IOT/IOT/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/tuantran221/Spring2022/software_design/icloud/IOT/IOT/node_modules/@babel/runtime/regenerator/index.js\";import{IconButton,TextField}from\"@material-ui/core\";import Radio from\"@material-ui/core/Radio\";import{makeStyles}from\"@material-ui/core/styles\";import{AddToPhotosOutlined}from\"@material-ui/icons\";import axios from\"axios\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import Helmet from\"../components/Helmet\";import config from\"../config\";import Table from\"../components/Table\";// ------------------------- style component material ui ------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(){return{inputInput:{minWidth:\"400px\",marginBottom:\"-20px\",border:0,borderRadius:20,color:\"white\"},iconee:{fontSize:\"30px\"},radio1:{height:40,marginRight:100,marginLeft:\"10px\"},radio2:{height:40},radio1P:{height:40,marginRight:100},radio2P:{height:40,marginLeft:\"-5px\"}};});var Private=function Private(props){var classes=useStyles();// using useState to set state foe values\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),filename=_useState2[0],Setname=_useState2[1];var _useState3=useState(\"file\"),_useState4=_slicedToArray(_useState3,2),type=_useState4[0],Settype=_useState4[1];var _useState5=useState(\"false\"),_useState6=_slicedToArray(_useState5,2),inputP=_useState6[0],setInputP=_useState6[1];var _useState7=useState(\"...\"),_useState8=_slicedToArray(_useState7,2),newurl=_useState8[0],setNewurl=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),text=_useState10[0],setText=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),errorMessages=_useState12[0],setErrorMessages=_useState12[1];var errors={uname:\"Please enter file name\",pass:\"please choose File or Folder\",PorP:\"please choose Public or Private\",success:\"successfull copied\"};// -------------------- function to post form to api--------------\nvar addForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _token,newform,Id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:document.getElementById(\"reset\").value=\"\";document.getElementById(\"Choose_Yes\").checked=false;if(!(filename===\"\")){_context.next=6;break;}setErrorMessages({name:\"uname\",message:errors.uname});_context.next=22;break;case 6:if(!(type===undefined||type===\"\")){_context.next=10;break;}setErrorMessages({name:\"pass\",message:errors.pass});_context.next=22;break;case 10:if(!(inputP===undefined)){_context.next=14;break;}setErrorMessages({name:\"PorP\",message:errors.PorP});_context.next=22;break;case 14:_token=localStorage.getItem(\"accessToken\");newform={name:filename,isPrivate:inputP,type:type};_context.next=18;return axios({method:\"POST\",url:config.REACT_APP_SERVER_URL+\"/create\",data:newform,headers:{authorization:\"token: \"+_token}});case 18:Id=_context.sent;Setname(\"\");Settype(\"\");if(newform.type===\"file\"){setNewurl(Id.data.data.ID);}else{setNewurl(Id.data.data.ID);}case 22:case\"end\":return _context.stop();}}},_callee);}));return function addForm(){return _ref.apply(this,arguments);};}();// ----------------------- fucntion control error client---------------\nvar renderErrorMessage=function renderErrorMessage(filename){return filename===errorMessages.filename&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errorMessages.message});};//  function to show url in input box\nvar inputHandler=function inputHandler(){setText(config.REACT_APP_SERVER_URL+\"/\"+newurl);};// --------------funtion to coppy text in input box -----------------------\nvar copy=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return navigator.clipboard.writeText(text);case 2:setErrorMessages({name:\"success\",message:errors.success});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function copy(){return _ref2.apply(this,arguments);};}();// --------------------------------- call api data table-----------------\nvar theadData=[\"Name\",\"Size\",\"Date\",\"Download\"];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),fileData=_useState14[0],setfileData=_useState14[1];console.log(\"fileData\",fileData);// --------------------------------- set value to get data from api\nvar token=localStorage.getItem(\"accessToken\");useEffect(function(){var fetchProducts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var respone;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios({method:\"get\",url:config.REACT_APP_SERVER_URL+\"/all\",headers:{authorization:\"token: \"+token}});case 2:respone=_context3.sent;setfileData(respone.data.data);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchProducts(){return _ref3.apply(this,arguments);};}();fetchProducts();console.log(\"respone\");},[token]);// --------------------set state filedata to avoid async ---------------------------------\nvar _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),datatable=_useState16[0],setDataTable=_useState16[1];useEffect(function(){if(fileData===null){setDataTable(fileData.files);console.log(\"if\");}else{setDataTable([]);}},[fileData]);// -------------------------- function to logout -------------------\nvar Logout_page=function Logout_page(){props.history.push(\"/\");};var handleChange=function handleChange(event){Settype(event.target.value);};var handleP=function handleP(e){setInputP(e.target.value);};// -----------------render ui ------------------------------------\nreturn/*#__PURE__*/_jsxs(Helmet,{title:\"Public page\",children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",marginBottom:\"-20px\"},children:/*#__PURE__*/_jsx(\"img\",{src:\"../images/logo1.png\",style:{height:\"150px\",width:\"200px\"},alt:\"logo\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"formaddtext\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TextField,{className:classes.inputInput,fullWidth:true,id:\"reset\",type:\"text\",onChange:function onChange(e){return Setname(e.target.value);},name:\"uname\",variant:\"outlined\",placeholder:\"Create File/Folder\",InputProps:{style:{borderRadius:100,paddingLeft:\"50px\",fontSize:15},endAdornment:/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(AddToPhotosOutlined,{className:classes.iconee,onClick:function onClick(){return addForm();}})})}}),renderErrorMessage(\"uname\")]})}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"Logout\",style:{textAlign:\"right\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"button_new\",style:{marginTop:\"50px\",marginBottom:\"50px\"},onClick:function onClick(){return Logout_page();},children:/*#__PURE__*/_jsx(\"i\",{class:\"bx bx-log-out\"})})})}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[\"File\",/*#__PURE__*/_jsx(Radio,{checked:type===\"file\",onChange:handleChange,value:\"file\",name:\"pass\",className:classes.radio1}),\"Folder\",/*#__PURE__*/_jsx(Radio,{checked:type===\"folder\",onChange:handleChange,value:\"folder\",name:\"pass\",className:classes.radio2}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",renderErrorMessage(\"pass\")]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[\"Public\",/*#__PURE__*/_jsx(Radio,{checked:inputP===\"false\",onChange:handleP,value:\"false\",name:\"PorP\",id:\"Choose_Yes\",className:classes.radio1P}),\"Private\",/*#__PURE__*/_jsx(Radio,{checked:inputP===\"true\",onChange:handleP,value:\"true\",name:\"PorP\",id:\"Choose_Yes\",className:classes.radio2P}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",renderErrorMessage(\"PorP\")]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"url\",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"This is your URL:\",\" \",/*#__PURE__*/_jsxs(\"span\",{style:{color:\"red\",cursor:\"pointer\"},children:[\" \",/*#__PURE__*/_jsxs(Link,{to:newurl,target:\"_blank\",children:[\" \",config.REACT_APP_SERVER_URL+\"/\"+newurl]}),\" \"]}),\" \"]})}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"inputgetURL\",type:\"text\",name:\"success\",value:text,onChange:inputHandler,style:{width:\"400px\",height:\"30px\"},placeholder:\"Enter spacebar to get link \"}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"350px\",marginTop:\"-33px\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:copy,disabled:!text,style:{background:\"none\",border:\"none\",marginLeft:\"10px\",paddingTop:\"-10px\"},children:/*#__PURE__*/_jsx(\"i\",{class:\"bx bx-copy\",variant:\"inherit\",style:{fontSize:\"30px\",lineHeight:\"20px\"}})})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},children:/*#__PURE__*/_jsx(Table,{theadData:theadData,tbodyData:datatable})})]});};export default Private;","map":{"version":3,"sources":["/home/tuantran221/Spring2022/software_design/icloud/IOT/IOT/src/pages/Private.jsx"],"names":["IconButton","TextField","Radio","makeStyles","AddToPhotosOutlined","axios","React","useState","useEffect","Link","Helmet","config","Table","useStyles","inputInput","minWidth","marginBottom","border","borderRadius","color","iconee","fontSize","radio1","height","marginRight","marginLeft","radio2","radio1P","radio2P","Private","props","classes","filename","Setname","type","Settype","inputP","setInputP","newurl","setNewurl","text","setText","errorMessages","setErrorMessages","errors","uname","pass","PorP","success","addForm","document","getElementById","value","checked","name","message","undefined","token","localStorage","getItem","newform","isPrivate","method","url","REACT_APP_SERVER_URL","data","headers","authorization","Id","ID","renderErrorMessage","inputHandler","copy","navigator","clipboard","writeText","theadData","fileData","setfileData","console","log","fetchProducts","respone","datatable","setDataTable","files","Logout_page","history","push","handleChange","event","target","handleP","e","textAlign","width","style","paddingLeft","endAdornment","marginTop","cursor","background","paddingTop","lineHeight","display","justifyContent","alignItems"],"mappings":"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","sourcesContent":["import { IconButton, TextField } from \"@material-ui/core\";\nimport Radio from \"@material-ui/core/Radio\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { AddToPhotosOutlined } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Helmet from \"../components/Helmet\";\nimport config from \"../config\";\nimport Table from \"../components/Table\";\n\n// ------------------------- style component material ui ------------------------\n\nconst useStyles = makeStyles(() => ({\n  inputInput: {\n    minWidth: \"400px\",\n    marginBottom: \"-20px\",\n\n    border: 0,\n    borderRadius: 20,\n    color: \"white\",\n  },\n  iconee: {\n    fontSize: \"30px\",\n  },\n  radio1: {\n    height: 40,\n    marginRight: 100,\n    marginLeft: \"10px\",\n  },\n  radio2: {\n    height: 40,\n  },\n  radio1P: {\n    height: 40,\n    marginRight: 100,\n  },\n  radio2P: {\n    height: 40,\n    marginLeft: \"-5px\",\n  },\n}));\n\n\nconst Private = (props) => {\n  const classes = useStyles();\n  // using useState to set state foe values\n  const [filename, Setname] = useState(\"\");\n  const [type, Settype] = useState(\"file\");\n  const [inputP, setInputP] = useState(\"false\");\n\n  const [newurl, setNewurl] = useState(\"...\");\n  const [text, setText] = useState(\"\");\n  const [errorMessages, setErrorMessages] = useState({});\n\n  const errors = {\n    uname: \"Please enter file name\",\n    pass: \"please choose File or Folder\",\n    PorP: \"please choose Public or Private\",\n    success: \"successfull copied\",\n  };\n  // -------------------- function to post form to api--------------\n\n  const addForm = async () => {\n    document.getElementById(\"reset\").value = \"\";\n    document.getElementById(\"Choose_Yes\").checked = false;\n\n    if (filename === \"\") {\n      setErrorMessages({ name: \"uname\", message: errors.uname });\n    } else if (type === undefined || type === \"\") {\n      setErrorMessages({ name: \"pass\", message: errors.pass });\n    } else if (inputP === undefined) {\n      setErrorMessages({ name: \"PorP\", message: errors.PorP });\n    } else {\n      let token = localStorage.getItem(\"accessToken\");\n\n      var newform = {\n        name: filename,\n        isPrivate: inputP,\n        type: type,\n      };\n      let Id = await axios({\n        method: \"POST\",\n        url: config.REACT_APP_SERVER_URL + \"/create\",\n        data: newform,\n        headers: {\n          authorization: \"token: \" + token,\n        },\n      });\n      Setname(\"\");\n      Settype(\"\");\n      if (newform.type === \"file\") {\n        setNewurl(Id.data.data.ID);\n      } else {\n        setNewurl(Id.data.data.ID);\n      }\n    }\n  };\n  // ----------------------- fucntion control error client---------------\n  const renderErrorMessage = (filename) =>\n    filename === errorMessages.filename && (\n      <div className=\"error\">{errorMessages.message}</div>\n    );\n\n  //  function to show url in input box\n\n  const inputHandler = () => {\n    setText(config.REACT_APP_SERVER_URL + \"/\" + newurl);\n  };\n\n  // --------------funtion to coppy text in input box -----------------------\n\n  const copy = async () => {\n    await navigator.clipboard.writeText(text);\n\n    setErrorMessages({ name: \"success\", message: errors.success });\n  };\n\n  // --------------------------------- call api data table-----------------\n\n  const theadData = [\"Name\", \"Size\", \"Date\", \"Download\"];\n  const [fileData, setfileData] = useState(\"\");\n  console.log(\"fileData\", fileData);\n\n  // --------------------------------- set value to get data from api\n  let token = localStorage.getItem(\"accessToken\");\n  useEffect(() => {\n    const fetchProducts = async () => {\n      const respone = await axios({\n        method: \"get\",\n        url: config.REACT_APP_SERVER_URL + \"/all\",\n        headers: { authorization: \"token: \" + token },\n      });\n      setfileData(respone.data.data);\n    };\n    fetchProducts();\n    console.log(\"respone\");\n  }, [token]);\n\n  // --------------------set state filedata to avoid async ---------------------------------\n\n  const [datatable, setDataTable] = useState([]);\n\n  useEffect(() => {\n    if (fileData === null) {\n      setDataTable(fileData.files);\n      console.log(\"if\");\n    } else {\n      setDataTable([]);\n    }\n  }, [fileData]);\n\n  // -------------------------- function to logout -------------------\n\n  const Logout_page = () => {\n    props.history.push(\"/\");\n  };\n\n  const handleChange = (event) => {\n    Settype(event.target.value);\n  };\n\n  const handleP = (e) => {\n    setInputP(e.target.value);\n  };\n// -----------------render ui ------------------------------------\n\n  return (\n    <Helmet title=\"Public page\">\n      <div style={{ textAlign: \"center\", marginBottom: \"-20px\" }}>\n        <img\n          src=\"../images/logo1.png\"\n          style={{ height: \"150px\", width: \"200px\" }}\n          alt=\"logo\"\n        />\n      </div>\n\n      <div className=\"formaddtext\">\n        <div>\n          <TextField\n            className={classes.inputInput}\n            fullWidth\n            id=\"reset\"\n            type=\"text\"\n            onChange={(e) => Setname(e.target.value)}\n            name=\"uname\"\n            variant=\"outlined\"\n            placeholder=\"Create File/Folder\"\n            InputProps={{\n              style: {\n                borderRadius: 100,\n                paddingLeft: \"50px\",\n\n                fontSize: 15,\n              },\n\n              endAdornment: (\n                <IconButton>\n                  <AddToPhotosOutlined\n                    className={classes.iconee}\n                    onClick={() => addForm()}\n                  />\n                </IconButton>\n              ),\n            }}\n          />\n          {renderErrorMessage(\"uname\")}\n        </div>\n      </div>\n\n      <section>\n        <div className=\"Logout\" style={{ textAlign: \"right\" }}>\n          <button\n            className=\"button_new\"\n            style={{ marginTop: \"50px\", marginBottom: \"50px\" }}\n            onClick={() => Logout_page()}\n          >\n            <i class=\"bx bx-log-out\"></i>\n          </button>\n        </div>\n      </section>\n      <div></div>\n\n      <div style={{ textAlign: \"center\" }}>\n        File\n        <Radio\n          checked={type === \"file\"}\n          onChange={handleChange}\n          value=\"file\"\n          name=\"pass\"\n          className={classes.radio1}\n        />\n        Folder\n        <Radio\n          checked={type === \"folder\"}\n          onChange={handleChange}\n          value=\"folder\"\n          name=\"pass\"\n          className={classes.radio2}\n        />\n        <div> {renderErrorMessage(\"pass\")}</div>\n      </div>\n\n      <div style={{ textAlign: \"center\" }}>\n        Public\n        <Radio\n          checked={inputP === \"false\"}\n          onChange={handleP}\n          value=\"false\"\n          name=\"PorP\"\n          id=\"Choose_Yes\"\n          className={classes.radio1P}\n        />\n        Private\n        <Radio\n          checked={inputP === \"true\"}\n          onChange={handleP}\n          value=\"true\"\n          name=\"PorP\"\n          id=\"Choose_Yes\"\n          className={classes.radio2P}\n        />\n        <div> {renderErrorMessage(\"PorP\")}</div>\n      </div>\n\n      <div className=\"url\" style={{ textAlign: \"center\" }}>\n        <h3>\n          This is your URL:{\" \"}\n          <span style={{ color: \"red\", cursor: \"pointer\" }}>\n            {\" \"}\n            <Link to={newurl} target=\"_blank\">\n              {\" \"}\n              {config.REACT_APP_SERVER_URL + \"/\" + newurl}\n            </Link>{\" \"}\n          </span>{\" \"}\n        </h3>\n      </div>\n\n      <div style={{ textAlign: \"center\" }}>\n        <input\n          className=\"inputgetURL\"\n          type=\"text\"\n          name=\"success\"\n          value={text}\n          onChange={inputHandler}\n          style={{ width: \"400px\", height: \"30px\" }}\n          placeholder=\"Enter spacebar to get link \"\n        />\n\n        <div style={{ marginLeft: \"350px\", marginTop: \"-33px\" }}>\n          <button\n            onClick={copy}\n            disabled={!text}\n            style={{\n              background: \"none\",\n              border: \"none\",\n              marginLeft: \"10px\",\n              paddingTop: \"-10px\",\n            }}\n          >\n            <i\n              class=\"bx bx-copy\"\n              variant=\"inherit\"\n              style={{ fontSize: \"30px\", lineHeight: \"20px\" }}\n            ></i>\n          </button>\n        </div>\n      </div>\n\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <Table theadData={theadData} tbodyData={datatable} />\n      </div>\n    </Helmet>\n  );\n};\n\nexport default Private;\n"]},"metadata":{},"sourceType":"module"}